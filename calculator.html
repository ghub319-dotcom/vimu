<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GreenBite — Calculator</title><link rel="icon" href="assets/favicon.png"><link rel="stylesheet" href="styles.css"></head><body>
<header class="container nav"><div class="brand"><div class="logo">GB</div></div><nav><div class="menu"><a href="index.html">Home</a><a href="recipes.html">Recipes</a></div></nav></header>
<main class="container">
  <h2>Calorie & Nutrition Calculator</h2>
  <form id="calc-form" class="card" style="display:grid;gap:.6rem;max-width:600px">
    <div style="display:flex;gap:.6rem;flex-wrap:wrap">
      <input placeholder="Age (years)" id="age" type="number">
      <select id="gender"><option value="male">Male</option><option value="female">Female</option></select>
      <input placeholder="Height (cm)" id="height" type="number">
      <input placeholder="Weight (kg)" id="weight" type="number">
    </div>
    <select id="activity">
      <option value="1.2">Sedentary (little or no exercise)</option>
      <option value="1.375">Lightly active</option>
      <option value="1.55">Moderately active</option>
      <option value="1.725">Very active</option>
      <option value="1.9">Super active</option>
    </select>
    <div style="display:flex;gap:.5rem">
      <button class="btn" type="button" id="calc-btn">Calculate</button>
      <button type="reset">Reset</button>
    </div>
  </form>

  <div id="results" class="card hidden" style="margin-top:1rem"></div>
</main>

<script src="scripts/common.js"></script>
<script>
function calcBMR(age,gender,height,weight){
  if(gender==='male') return 10*weight + 6.25*height - 5*age + 5;
  return 10*weight + 6.25*height - 5*age - 161;
}
document.getElementById('calc-btn').addEventListener('click', ()=>{
  const age=Number(document.getElementById('age').value);
  const gender=document.getElementById('gender').value;
  const height=Number(document.getElementById('height').value);
  const weight=Number(document.getElementById('weight').value);
  const factor=Number(document.getElementById('activity').value);
  if(!age || !height || !weight){ showToast('Please fill all fields'); return; }
  const bmr = Math.round(calcBMR(age,gender,height,weight));
  const tdee = Math.round(bmr * factor);
  const carbs_g = Math.round((tdee * 0.5)/4);
  const prot_g = Math.round((tdee * 0.2)/4);
  const fat_g = Math.round((tdee * 0.3)/9);
  document.getElementById('results').classList.remove('hidden');
  document.getElementById('results').innerHTML = `<h3>Results</h3>
    <p>BMR: <strong>${bmr} kcal</strong></p>
    <p>TDEE: <strong>${tdee} kcal</strong></p>
    <h4>Macros</h4>
    <p>Carbs: ${carbs_g} g · Protein: ${prot_g} g · Fat: ${fat_g} g</p>
    <div class="progress" style="margin-top:.5rem"><span style="width:${50}%"></span></div>
    <div style="display:flex;gap:.4rem;margin-top:.6rem">
      <button class="btn" onclick="saveProfile()">Save profile</button>
      <button onclick="document.getElementById('results').classList.add('hidden')">Hide</button>
    </div>`;
  storage.save('lastCalc',{date: new Date().toISOString(), bmr,tdee,carbs_g,prot_g,fat_g});
});
function saveProfile(){
  const p = storage.load('lastCalc');
  if(!p){ showToast('No result to save'); return; }
  storage.save('savedProfile', p);
  showToast('Profile saved');
}
</script>
</body></html>